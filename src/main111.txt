#include <HardwareSerial.h>
#include <Adafruit_GPS.h>

HardwareSerial gpsSerial(0); // Utiliza el primer puerto serial (TX0 y RX0)
Adafruit_GPS GPS(&gpsSerial);

void setup() {
  // Inicia la comunicación serial con el GPS a 9600 baudios.
  gpsSerial.begin(115200);
  
  // Configuraciones adicionales para el GPS pueden ir aquí.
  // Por ejemplo, cambiar la frecuencia de actualización, sentencias NMEA, etc.
  GPS.sendCommand(PMTK_SET_NMEA_OUTPUT_RMCGGA);
  GPS.sendCommand(PMTK_SET_NMEA_UPDATE_1HZ); // Configura el GPS para enviar datos cada segundo.
}

void loop() {
  // Código para leer y procesar datos del GPS.
  // Ten en cuenta que no podrás utilizar el Serial Monitor para la depuración.
  
  if (gpsSerial.available()) { // Verifica si hay datos disponibles del GPS.
    char c = gpsSerial.read(); // Lee un carácter del GPS.
    if (GPS.newNMEAreceived()) {
      // Si has recibido una sentencia NMEA completa, intenta parsearla.
      if (GPS.parse(GPS.lastNMEA())) {
        // Aquí puedes acceder a la información del GPS.
        // Por ejemplo, imprimir la latitud y la longitud.
        if (GPS.fix) {
          Serial.print("Location: ");
          Serial.print(GPS.latitude, 4); Serial.print(GPS.lat);
          Serial.print(", ");
          Serial.print(GPS.longitude, 4); Serial.println(GPS.lon);
        }
      }
    }
  }
  Serial.print("Looping...");
  
  // Recuerda que no debes usar Serial.print() para la depuración aquí,
  // ya que eso interferiría con la comunicación con el GPS.
}